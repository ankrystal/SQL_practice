# ë¬¸ì œ 185. Department Top Three Salaries

Q. A company's executives are interested in seeing who earns the most money in each of the company's departments. <br>
A high earner in a department is an employee who has a salary in the top three unique salaries for that department.<br>
Write an SQL query to find the employees who are high earners in each of the departments.

Return the result table in any order.

ğŸ”‘ ë¬¸ì œ í’€ì´
#### ìœˆë„ìš° í•¨ìˆ˜(DENSE_RANK) ì‚¬ìš©í•´ì„œ í’€ê¸°
```mysql
SELECT Department.Name AS 'Department'
     , e.name AS 'Employee'
     , e.salary 
FROM
    (SELECT departmentId
        , name
        , salary
        , DENSE_RANK() OVER (PARTITION BY departmentId ORDER BY salary DESC) AS r
    FROM Employee) e
JOIN Department ON e.departmentId = Department.id
WHERE r <= 3 
```

#### SUBQUERYë¡œ í’€ê¸°
```mysql
SELECT d.name Department
     , e.name Employee
     , e.salary Salary
FROM Employee e JOIN Department d 
ON e.departmentId = d.Id
WHERE e.salary IN (
    SELECT * FROM (                  
        SELECT DISTINCT(salary) 
        FROM Employee 
        WHERE departmentId = d.Id 
        ORDER BY salary DESC LIMIT 3
    ) AS _
)
```

ì¶œì²˜: [LeetCode ë¬¸ì œ ë³´ê¸°](https://leetcode.com/problems/department-top-three-salaries/description/)

#### ğŸ’¡ INë¬¸ ë’¤ì— SELECT * FROMì„ ë„£ì€ ì´ìœ  
- LIMITì„ ì´ìš©í•œ ì„œë¸Œì¿¼ë¦¬ëŠ” í•´ë‹¹ MySQL ë²„ì „ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ SELECT * FROM ë¬¸ì„ ë„£ì–´ì¤Œìœ¼ë¡œì¨ ì´ë¥¼ í•´ê²° <br>
<This version of MySQL doesn't yet support 'LIMIT & IN/ALL/ANY/SOME subquery>

